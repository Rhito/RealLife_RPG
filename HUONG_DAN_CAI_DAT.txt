# ğŸ“– HÆ°á»›ng Dáº«n CÃ i Äáº·t Dá»± Ãn RealLife RPG

Dá»± Ã¡n bao gá»“m 2 pháº§n chÃ­nh:
- **Backend**: Laravel 12 (API Server)
- **Mobile App**: React Native vá»›i Expo

---

## ğŸ“‹ YÃªu Cáº§u Há»‡ Thá»‘ng

### Backend (Laravel)
- **PHP**: >= 8.2
- **Composer**: phiÃªn báº£n má»›i nháº¥t
- **Database**: MySQL hoáº·c MariaDB
- **Redis**: cho queue vÃ  broadcasting (khuyáº¿n nghá»‹)
- **Node.js**: >= 18.x (cho Vite)
- **NPM** hoáº·c **Yarn**

### Mobile App (React Native)
- **Node.js**: >= 18.x
- **NPM** hoáº·c **Yarn**
- **Expo CLI**: cÃ i Ä‘áº·t global hoáº·c dÃ¹ng npx
- **Android Studio**: Ä‘á»ƒ cháº¡y Android emulator
- **Xcode**: Ä‘á»ƒ cháº¡y iOS simulator (chá»‰ trÃªn macOS)

---

## ğŸš€ CÃ i Äáº·t Backend (Laravel)

### BÆ°á»›c 1: Clone hoáº·c má»Ÿ dá»± Ã¡n
```bash
cd c:\Laravel\RealLife_RPG\RealLife_RPG
```

### BÆ°á»›c 2: CÃ i Ä‘áº·t dependencies
```bash
# CÃ i Ä‘áº·t PHP dependencies
composer install

# CÃ i Ä‘áº·t Node.js dependencies (cho Vite)
npm install
```

### BÆ°á»›c 3: Cáº¥u hÃ¬nh mÃ´i trÆ°á»ng
```bash
# Copy file .env.example sang .env
copy .env.example .env
```

Má»Ÿ file `.env` vÃ  cáº¥u hÃ¬nh cÃ¡c thÃ´ng sá»‘ sau:

```env
APP_NAME=RealLife_RPG
APP_ENV=local
APP_KEY=
APP_DEBUG=true
APP_URL=http://localhost:8000

# Database
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=reallife_rpg
DB_USERNAME=root
DB_PASSWORD=your_password_here

# Queue (Ä‘á»ƒ xá»­ lÃ½ tasks vÃ  notifications)
QUEUE_CONNECTION=database

# Broadcasting (cho realtime chat)
BROADCAST_CONNECTION=pusher

# Pusher configuration (náº¿u dÃ¹ng Pusher)
PUSHER_APP_ID=your_app_id
PUSHER_APP_KEY=your_app_key
PUSHER_APP_SECRET=your_app_secret
PUSHER_APP_CLUSTER=your_cluster

# Hoáº·c dÃ¹ng Laravel Reverb
REVERB_APP_ID=your_app_id
REVERB_APP_KEY=your_app_key
REVERB_APP_SECRET=your_app_secret
REVERB_HOST=localhost
REVERB_PORT=8080
REVERB_SCHEME=http

# Mail (náº¿u cáº§n)
MAIL_MAILER=smtp
MAIL_HOST=your_mail_host
MAIL_PORT=587
MAIL_USERNAME=your_email
MAIL_PASSWORD=your_password

# OAuth (Google, Facebook, GitHub)
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_REDIRECT_URI=http://localhost:8000/auth/google/callback

FACEBOOK_CLIENT_ID=your_facebook_app_id
FACEBOOK_CLIENT_SECRET=your_facebook_app_secret
FACEBOOK_REDIRECT_URI=http://localhost:8000/auth/facebook/callback

GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret
GITHUB_REDIRECT_URI=http://localhost:8000/auth/github/callback

# AWS S3 (náº¿u dÃ¹ng cloud storage)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_DEFAULT_REGION=ap-southeast-1
AWS_BUCKET=your_bucket_name
```

### BÆ°á»›c 4: Táº¡o database
```bash
# Táº¡o database trong MySQL
mysql -u root -p
CREATE DATABASE reallife_rpg CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
EXIT;
```

### BÆ°á»›c 5: Generate application key
```bash
php artisan key:generate
```

### BÆ°á»›c 6: Cháº¡y migrations
```bash
# Cháº¡y migrations Ä‘á»ƒ táº¡o báº£ng
php artisan migrate

# (TÃ¹y chá»n) Cháº¡y seeders náº¿u cÃ³
php artisan db:seed
```

### BÆ°á»›c 7: Táº¡o symbolic link cho storage
```bash
php artisan storage:link
```

### BÆ°á»›c 8: Cháº¡y á»©ng dá»¥ng

#### Option 1: Cháº¡y riÃªng láº» (má»Ÿ nhiá»u terminal)
```bash
# Terminal 1: Cháº¡y Laravel server
php artisan serve

# Terminal 2: Cháº¡y queue worker
php artisan queue:work

# Terminal 3: Cháº¡y Vite dev server
npm run dev

# Terminal 4 (náº¿u dÃ¹ng Reverb): Cháº¡y broadcasting server
php artisan reverb:start
```

#### Option 2: Cháº¡y táº¥t cáº£ cÃ¹ng lÃºc (khuyáº¿n nghá»‹)
```bash
# Cháº¡y lá»‡nh nÃ y sáº½ tá»± Ä‘á»™ng start táº¥t cáº£ services
composer dev
```

Backend sáº½ cháº¡y táº¡i: **http://localhost:8000**

---

## ğŸ“± CÃ i Äáº·t Mobile App (React Native Expo)

### BÆ°á»›c 1: Di chuyá»ƒn vÃ o thÆ° má»¥c mobile
```bash
cd c:\Laravel\RealLife_RPG\RealLife_RPG_Mobile
```

### BÆ°á»›c 2: CÃ i Ä‘áº·t dependencies
```bash
npm install
```

### BÆ°á»›c 3: Cáº¥u hÃ¬nh mÃ´i trÆ°á»ng
```bash
# Copy file .env.example sang .env
copy .env.example .env
```

Má»Ÿ file `.env` vÃ  cáº¥u hÃ¬nh:

```env
# API Backend URL
EXPO_PUBLIC_API_URL=http://localhost:8000/api
EXPO_PUBLIC_WS_URL=ws://localhost:8080

# Pusher configuration (pháº£i giá»‘ng vá»›i backend)
EXPO_PUBLIC_PUSHER_APP_KEY=your_app_key
EXPO_PUBLIC_PUSHER_APP_CLUSTER=your_cluster

# Hoáº·c Reverb
EXPO_PUBLIC_REVERB_HOST=localhost
EXPO_PUBLIC_REVERB_PORT=8080
EXPO_PUBLIC_REVERB_APP_KEY=your_app_key

# OAuth Redirect URIs (cho deep linking)
EXPO_PUBLIC_GOOGLE_CLIENT_ID=your_google_client_id
```

> **LÆ°u Ã½**: Náº¿u cháº¡y trÃªn thiáº¿t bá»‹ tháº­t hoáº·c emulator, thay `localhost` báº±ng IP mÃ¡y tÃ­nh cá»§a báº¡n (vÃ­ dá»¥: `192.168.1.100`)

### BÆ°á»›c 4: Cháº¡y á»©ng dá»¥ng

#### Development mode vá»›i Expo Go
```bash
# Start Expo dev server
npx expo start

# Hoáº·c dÃ¹ng script
npm start
```

Sau Ä‘Ã³:
- Nháº¥n `a` Ä‘á»ƒ má»Ÿ Android emulator
- Nháº¥n `i` Ä‘á»ƒ má»Ÿ iOS simulator (chá»‰ macOS)
- QuÃ©t QR code báº±ng Expo Go app trÃªn Ä‘iá»‡n thoáº¡i tháº­t

#### Development build (khuyáº¿n nghá»‹)
```bash
# Cháº¡y trÃªn Android
npx expo run:android

# Cháº¡y trÃªn iOS (chá»‰ macOS)
npx expo run:ios
```

---

## ğŸ”§ CÃ¡c Lá»‡nh Há»¯u Ãch

### Backend (Laravel)
```bash
# Clear cache
php artisan cache:clear
php artisan config:clear
php artisan route:clear
php artisan view:clear

# Cháº¡y tests
composer test
# hoáº·c
php artisan test

# Code formatting
./vendor/bin/pint

# Xem logs realtime
php artisan pail
```

### Mobile App
```bash
# Lint code
npm run lint

# Clear cache
npx expo start -c

# Build production
npx expo build:android
npx expo build:ios

# Update dependencies
npx expo install --fix
```

---

## ğŸ› Troubleshooting

### Backend

**Problem**: Migration failed
```bash
# Reset database
php artisan migrate:fresh

# Hoáº·c rollback vÃ  migrate láº¡i
php artisan migrate:rollback
php artisan migrate
```

**Problem**: Queue jobs khÃ´ng cháº¡y
```bash
# Restart queue worker
php artisan queue:restart
php artisan queue:work
```

**Problem**: Broadcasting khÃ´ng hoáº¡t Ä‘á»™ng
- Kiá»ƒm tra Pusher/Reverb credentials trong `.env`
- Kiá»ƒm tra queue worker Ä‘ang cháº¡y
- Xem logs: `php artisan pail`

### Mobile App

**Problem**: Cannot connect to backend
- Äáº£m báº£o backend Ä‘ang cháº¡y
- Thay `localhost` báº±ng IP tháº­t náº¿u test trÃªn thiáº¿t bá»‹ tháº­t
- Kiá»ƒm tra firewall khÃ´ng block port 8000

**Problem**: Metro bundler error
```bash
# Clear cache vÃ  restart
npx expo start -c
```

**Problem**: Module not found
```bash
# Reinstall dependencies
rm -rf node_modules
npm install
```

---

## ğŸ“¦ Cáº¥u TrÃºc Dá»± Ãn

### Backend (Laravel)
```
RealLife_RPG/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ Http/Controllers/    # API Controllers
â”‚   â”œâ”€â”€ Models/              # Database Models
â”‚   â”œâ”€â”€ Events/              # Broadcasting Events
â”‚   â””â”€â”€ Services/            # Business Logic
â”œâ”€â”€ config/                  # Configuration files
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ migrations/          # Database migrations
â”‚   â””â”€â”€ seeders/            # Database seeders
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ api.php             # API routes
â”‚   â””â”€â”€ channels.php        # Broadcasting channels
â””â”€â”€ .env                    # Environment configuration
```

### Mobile App
```
RealLife_RPG_Mobile/
â”œâ”€â”€ app/                    # Expo Router screens
â”‚   â””â”€â”€ (tabs)/            # Tab navigation screens
â”œâ”€â”€ components/            # Reusable components
â”œâ”€â”€ services/              # API services
â”œâ”€â”€ context/               # React Context
â”œâ”€â”€ hooks/                 # Custom hooks
â”œâ”€â”€ utils/                 # Utility functions
â””â”€â”€ .env                   # Environment configuration
```

---

## ğŸ¯ CÃ¡c TÃ­nh NÄƒng ChÃ­nh

- âœ… Authentication (Email, Google, Facebook, GitHub)
- âœ… Task Management (Daily tasks, Custom tasks)
- âœ… Friends System
- âœ… Real-time Chat (Pusher/Reverb)
- âœ… Notifications
- âœ… Multi-language support (i18n)

---

## ğŸ“ Há»— Trá»£

Náº¿u gáº·p váº¥n Ä‘á» trong quÃ¡ trÃ¬nh cÃ i Ä‘áº·t, vui lÃ²ng:
1. Kiá»ƒm tra láº¡i cÃ¡c bÆ°á»›c cÃ i Ä‘áº·t
2. Xem log files trong `storage/logs` (Laravel)
3. Check console errors (Mobile app)

---

**ChÃºc báº¡n code vui váº»! ğŸš€**
